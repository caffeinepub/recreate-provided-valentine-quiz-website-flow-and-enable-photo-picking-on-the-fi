{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Love letter UI: backend-first with exact default fallback and preserved formatting",
  "requirements": [
    {
      "id": "REQ-37",
      "summary": "Display backend love letter when available; otherwise fall back to defaultLoveLetter on empty/whitespace/error while preserving exact line breaks and preventing auto-hyphenation/reformatting.",
      "acceptanceCriteria": [
        "If the backend returns the correct letter, the UI displays it with the same line breaks as stored.",
        "If the backend returns an empty/whitespace-only string or fails to load, the UI displays the `defaultLoveLetter` text from `frontend/src/valentine/loveLetter.ts` with all line breaks preserved.",
        "No part of the letter text is auto-hyphenated or reformatted in a way that changes the letterâ€™s content."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/ValentineMessage.tsx",
          "operation": "modify",
          "description": "Harden the displayed love letter selection logic to prefer the backend value when present, but fall back to `defaultLoveLetter` when the backend value is missing/empty/whitespace-only or when loading fails; keep `whitespace-pre-wrap` rendering and disable hyphenation (set hyphens to 'none') to avoid any automatic reformatting of the letter text."
        }
      ]
    }
  ]
}